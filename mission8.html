<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CyberBase ‚Äì Mission 8: The Oracle Protocol</title>
<style>
* {
    box-sizing: border-box;
}

body {
    font-family: 'Courier New', monospace;
    background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
    color: #00ff00;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    margin: 0;
    min-height: 100vh;
}

.header {
    text-align: center;
    margin-bottom: 30px;
}

h1 {
    color: #00ff00;
    text-shadow: 0 0 20px #00ff00;
    font-size: 2.5em;
    margin-bottom: 10px;
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from { text-shadow: 0 0 20px #00ff00; }
    to { text-shadow: 0 0 30px #00ff00, 0 0 40px #00ff00; }
}

.mission-status {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    justify-content: center;
}

.status-indicator {
    padding: 8px 16px;
    border: 2px solid #00ff00;
    border-radius: 20px;
    background: rgba(0, 255, 0, 0.1);
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.container {
    max-width: 800px;
    width: 100%;
}

.terminal {
    background: linear-gradient(145deg, #111, #000);
    border: 2px solid #00ff00;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 0 30px rgba(0, 255, 0, 0.2);
    position: relative;
    overflow: hidden;
}

.terminal::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #00ff00, #003300, #00ff00);
    border-radius: 15px;
    z-index: -1;
    animation: borderFlow 3s linear infinite;
}

@keyframes borderFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.mission-brief {
    background: rgba(0, 255, 0, 0.05);
    padding: 20px;
    border-left: 4px solid #00ff00;
    margin-bottom: 25px;
    border-radius: 8px;
}

.chatbot-container {
    background: rgba(0, 255, 0, 0.02);
    border: 1px solid #00ff00;
    border-radius: 10px;
    padding: 25px;
    margin: 20px 0;
}

.messages {
    height: 300px;
    overflow-y: auto;
    border: 2px solid #00ff00;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    background: rgba(0, 0, 0, 0.8);
    box-shadow: inset 0 0 15px rgba(0, 255, 0, 0.1);
}

.messages::-webkit-scrollbar {
    width: 8px;
}

.messages::-webkit-scrollbar-track {
    background: #111;
    border-radius: 4px;
}

.messages::-webkit-scrollbar-thumb {
    background: #00ff00;
    border-radius: 4px;
}

.message {
    margin: 10px 0;
    padding: 8px 12px;
    border-radius: 6px;
    line-height: 1.4;
}

.user-message {
    background: rgba(0, 255, 0, 0.1);
    border-left: 3px solid #00ff00;
    margin-left: 20px;
}

.bot-message {
    background: rgba(0, 255, 0, 0.05);
    border-left: 3px solid #00aa00;
    margin-right: 20px;
}

.input-group {
    display: flex;
    gap: 10px;
    margin: 20px 0;
    align-items: center;
}

.input-field {
    flex: 1;
    padding: 12px;
    border: 2px solid #00ff00;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.8);
    color: #00ff00;
    font-family: 'Courier New', monospace;
    transition: all 0.3s;
}

.input-field:focus {
    outline: none;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
    background: rgba(0, 255, 0, 0.05);
}

.button {
    background: linear-gradient(145deg, #003300, #001100);
    color: #00ff00;
    border: 2px solid #00ff00;
    padding: 12px 24px;
    font-size: 1em;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-family: 'Courier New', monospace;
    transition: all 0.3s;
}

.button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 255, 0, 0.3);
}

.flag-reveal {
    background: linear-gradient(145deg, #001100, #003300);
    border: 2px solid #00ff00;
    padding: 25px;
    border-radius: 15px;
    margin-top: 20px;
    text-align: center;
    font-weight: bold;
    font-size: 1.2em;
    display: none;
    animation: flagReveal 1s ease-in-out;
    box-shadow: 0 0 30px rgba(0, 255, 0, 0.4);
}

@keyframes flagReveal {
    0% { opacity: 0; transform: scale(0.8); }
    100% { opacity: 1; transform: scale(1); }
}

.hint-section {
    background: rgba(0, 255, 0, 0.05);
    border: 1px dashed #00ff00;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
}

.hint-button {
    background: transparent;
    border: 1px dashed #666;
    color: #666;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9em;
    margin-bottom: 10px;
    transition: all 0.3s;
}

.hint-button:hover {
    border-color: #00ff00;
    color: #00ff00;
}

.hint {
    background: rgba(0, 255, 0, 0.05);
    border-left: 3px solid #00ff00;
    padding: 10px;
    margin-top: 10px;
    border-radius: 0 8px 8px 0;
    font-style: italic;
    display: none;
    animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.back-button {
    background: linear-gradient(145deg, #333, #111);
    color: #00ff00;
    border: 2px solid #00ff00;
    padding: 12px 20px;
    font-size: 1em;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    font-weight: bold;
    transition: all 0.3s;
    margin-top: 20px;
    display: inline-block;
}

.back-button:hover {
    background: #00ff00;
    color: #000;
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .input-group {
        flex-direction: column;
    }
    
    .input-field {
        margin-bottom: 10px;
    }
    
    h1 {
        font-size: 2em;
    }
    
    .messages {
        height: 250px;
    }
}
</style>
</head>
<body>

<div class="header">
    <h1>ü§ñ CyberBase Mission 8: The Oracle Protocol</h1>
    <div class="mission-status">
        <div class="status-indicator">üîç Intelligence Gathering Active</div>
    </div>
</div>

<div class="container">
    <div class="terminal">
        <div class="mission-brief">
            <p><strong>üéØ Mission Brief:</strong></p>
            <p>Agent, you've discovered an AI system left behind by ShadowNet operatives. This "Oracle" responds to specific input patterns. Your mission: Extract classified intelligence by finding the correct trigger sequence.</p>
            <p><strong>Intel:</strong> The Oracle may respond differently to unusual character combinations...</p>
        </div>
        
        <div class="chatbot-container">
            <div class="messages" id="messages">
                <div class="bot-message message">
                    <strong>Oracle:</strong> System initialized. I am the Oracle Protocol. How may I assist you, Agent?
                </div>
            </div>
            
            <div class="input-group">
                <input type="text" id="chatInput" class="input-field" placeholder="Enter your query..." autocomplete="off">
                <button class="button" onclick="sendMessage()">üì§ Send</button>
            </div>
            
            <div class="hint-section">
                <button class="hint-button" onclick="toggleHint()">üí° Need a hint?</button>
                <div class="hint" id="hint1">
                    No More Hints, You got this :)
                </div>
            </div>
        </div>

        <div id="flag" class="flag-reveal">
            <h2>üéâ INTELLIGENCE EXTRACTED!</h2>
            <p>Excellent work, Agent! You've successfully triggered the Oracle Protocol.</p>
            <div style="font-size:1.3em;color:#00ff00;margin:15px 0;padding:15px;background:rgba(0,255,0,0.1);border-radius:8px;">
                <strong>Encoded Intelligence:</strong> <span id="encodedFlag"></span>
            </div>
            <p><strong>üìã Your Task:</strong> Decode the Base64 string above to reveal the final flag!</p>
        </div>
    </div>
    
    <a href="#" class="back-button" onclick="history.back()">‚¨Ö Return to Mission Control</a>
</div>

<script>
// Global variables
const messagesDiv = document.getElementById('messages');
const encodedFlag = "Q3liZXJCYXNlezF0el9nMG9kXzJfam5vdy1qJH0=";
let flagRevealed = false;

// Simple, direct function to send message
function sendMessage() {
    console.log("sendMessage function called!");
    
    const input = document.getElementById('chatInput');
    const userInput = input.value.trim();
    
    console.log("User input:", userInput);
    
    if (!userInput) {
        alert("Please enter a message!");
        return;
    }

    // Add user message
    addMessage("You", userInput, "user-message");
    
    // Clear input
    input.value = '';
    
    // Show typing indicator
    addMessage("Oracle", "processing query...", "bot-message", "typing");
    
    // Get bot response after delay
    setTimeout(() => {
        // Remove typing indicator
        const typingMsg = document.querySelector('.typing');
        if (typingMsg) typingMsg.remove();
        
        // Get response
        const response = getBotResponse(userInput);
        
        // Add bot response
        addMessage("Oracle", response.text, "bot-message");
        
        // Show flag if triggered
        if (response.isFlag && !flagRevealed) {
            setTimeout(() => {
                document.getElementById('encodedFlag').textContent = encodedFlag;
                document.getElementById('flag').style.display = 'block';
                flagRevealed = true;
            }, 1000);
        }
        
    }, 1500);
}

// Function to add message to chat
function addMessage(sender, text, messageClass, extraClass = "") {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${messageClass} ${extraClass}`;
    messageDiv.innerHTML = `<strong>${sender}:</strong> ${text}`;
    messagesDiv.appendChild(messageDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

// Bot response logic
function getBotResponse(input) {
    const triggers = ['!', '@', '#', '$', '%', '^', '&', '*'];
    const hasSpecialChar = triggers.some(ch => input.includes(ch));
    
    if (hasSpecialChar) {
        return {
            text: encodedFlag,
            isFlag: true
        };
    } else {
        const responses = [
            "Interesting query, Agent. Perhaps you need to be more... specific?",
            "The Oracle Protocol requires a unique access pattern. Try again.",
            "I sense you're close to something, but not quite there yet...",
            "Standard queries yield standard responses. Think outside the parameters.",
            "The ancient protocols speak of symbols with power...",
            "Your clearance level may not be sufficient for that information."
        ];
        return {
            text: responses[Math.floor(Math.random() * responses.length)],
            isFlag: false
        };
    }
}

// Toggle hint function
function toggleHint() {
    const hint = document.getElementById('hint1');
    if (hint.style.display === 'none' || hint.style.display === '') {
        hint.style.display = 'block';
    } else {
        hint.style.display = 'none';
    }
}

// Enter key support
document.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});

// Focus on input when page loads
window.onload = function() {
    document.getElementById('chatInput').focus();
    console.log("Page loaded and input focused!");
};
</script>

</body>
</html>